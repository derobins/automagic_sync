name: Merge to Branch 1

on:
  pull_request:
    branches:
      - main
    types:
      - closed

jobs:
  merge_upstream:

    if: |
      contains(github.event.pull_request.labels.*.name, 'Merge to Branch 1') &&
      github.event.pull_request.merged == true

    runs-on: ubuntu-latest

    permissions:
      constents: write

    steps:

    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Set up Git
      run: |
        git config user.name "GitHub Actions"
        git config user.email "actions@github.com"

    - name: Create the holding pen branch if it doesn't exist
      run: |
        git fetch --all

        BRANCH_NAME="branch_1_holding_pen"

        if git show-ref --quiet refs/heads/$BRANCH_NAME; then
          echo "Branch '$BRANCH_NAME' already exists."
        else
          echo "Branch '$BRANCH_NAME' does not exist. Creating new branch."
          git checkout -b $BRANCH_NAME
          git push origin $BRANCH_NAME
        fi

        #    - name: Merge this commit to the holding pen
        #      run: |

